# Astrocyte_Ab

## Project Description
To compare the changes in gene expressions as a result of Amyloid Beta uptake and clearance between APOE33 and APOE44.

## Data
Bulk RNA sequencing data produced by Azenta. 150 bp paired end reads failed QC threshold and therefore analysis was done using 100 bp paired end reads.

Data Directory `/projectnb/tcwlab/RawData/RawRNAseq/APOE_Ab/2x100`

## Analysis Pipeline
1). Fastq link
2). FastQC
3). MultiQC
4). Alignment
5). Alignment QC
6). Indexing
7). Feature Count
8). Deseq2
9). GSEA

## Progress
Finished until Deseq2 analysis, running GSEA.

## Usage

Original pipeline included both R and qsub files that were developed by Yun: `/projectnb/tcwlab/LabMember/yshen16/git/APOE_RNASeq_pipeline/scripts`. However, customizations are needed at the following code locations:

1). Config file for main program `<filename>.cfg)` -- Must be present at the location of the specified `CONFIG_ROOT` in the cfg file.

2). Config file for main program `<filename>.cfg)` -- `PROJ_DIR` specifies the output_dir

3). Config file for main program `<filename>.cfg)` -- `DESEQ2_CONF_DIR`, `DESEQ2_CONF_NUM`, `DESEQ2_CONF_LIST` need to match the actual DESEQ2 comparison designs.

4). Config file for main program `<filename>.cfg)` -- `SGE_TOTAL_TASK` specifies the number of input files, which can be known using `wc -l` in the Raw_Data_DIR `PROJ_RAWDIR`

5). Config file for main program `<filename>.cfg)` -- `PROJ_MAP_SCRIPT` specifies the perl script name (labelled as filename_map_APOE.pl by Yun in her directory, can rename it for self-use) that acts to generate softlinks of the raw data , rename them in the `PROJ_DIR`, which will be Sample_IDs used in downstream analyzes. **Make sure to check the generated csv files as this is the backbone of the entire pipeline**

6). Once the parameters in the cfg file has been confirmed, initiate the script that will generate scripts for all 9 steps in the pipeline using `generate_proj_script_w_config.pl /path to your cfg file/<filename>.cfg`. **The directory where you run this command must have all the files in `/projectnb/tcwlab/LabMember/yshen16/git/APOE_RNASeq_pipeline/scripts`, which includes the `generate_proj_script_w_config.pl ` file**

7). Step 6 will generate a script directory at the specified `PROJ_DIR` in the cfg file. Once in the scripts directory, the outputs of each of the 9 steps will be generated by calling the shell script <filename>.sh using `<filename>.sh`. One can add numbers from 1-9 to the command, each number represents the corresponding step number. For instance, `<filename>.sh '3 4'` means only run Step 3 (MultiQC) and Step 4 (MultiQC Alignment) (Assuming outputs from previous steps have been generated). **When running this pipeline for a new project, I highly recommend running the steps one by one to check the accuracies of each output, read the qlog, and adjust the script accordingly.**

## File Annotation

Config files for Deseq2 `deseq2_conf` 

Metadata `deseq2_conf/Metadata.csv`
